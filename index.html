<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>WHMCS 支付宝插件 by frankwei98</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">WHMCS 支付宝插件</h1>
      <h2 class="project-tagline">WHMCS 支付宝插件 支持即时到账 担保交易 双功能收款</h2>
      <a href="https://github.com/frankwei98/WHMCS_Alipay" class="btn">View on GitHub</a>
      <a href="https://github.com/frankwei98/WHMCS_Alipay/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/frankwei98/WHMCS_Alipay/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="whmcs_alipay" class="anchor" href="#whmcs_alipay" aria-hidden="true"><span class="octicon octicon-link"></span></a>WHMCS_Alipay</h1>

<p><strong>本项目是为了维护该插件在WHMCS 6.X正常使用而设，欢迎大家Fork&amp;提交代码&amp;反馈Bug!</strong></p>

<p><strong>原版已经开源，原作者为</strong> <a href="mailto:67052@qq.com">Bendy</a>  </p>

<p>本插件支持三种模式：即时到账，担保交易，双功能收款</p>

<h1>
<a id="目前在原版上改动了什么" class="anchor" href="#%E7%9B%AE%E5%89%8D%E5%9C%A8%E5%8E%9F%E7%89%88%E4%B8%8A%E6%94%B9%E5%8A%A8%E4%BA%86%E4%BB%80%E4%B9%88" aria-hidden="true"><span class="octicon octicon-link"></span></a>目前在原版上改动了什么?</h1>

<p>1、WHMCS 6.X后<code>dbconnect.php</code>被<code>init.php</code>替代 这个得换 不然会出错</p>

<p>2、原版的付款按钮丑的掺不忍睹，我换了个自认为能看的支付按钮（当然我们欢迎更好看的支付按钮，有更好看的按钮请Pull request!）</p>

<h1>
<a id="安装" class="anchor" href="#%E5%AE%89%E8%A3%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>安装</h1>

<p>下载ZIP包，解压包上所有的文件，并全部上传到whmcs安装目录的 <code>/modules/gateways</code> 目录下</p>

<p>上传后.访问 <code>http://你的whmcs网站地址/modules/gateways/callback/alipaytest.php</code> 测试连通性</p>

<h1>
<a id="货币设置" class="anchor" href="#%E8%B4%A7%E5%B8%81%E8%AE%BE%E7%BD%AE" aria-hidden="true"><span class="octicon octicon-link"></span></a>货币设置</h1>

<p>本接口设计时,只支持RMB作为货币单位,所以.你在WHMCS一定要先设置正确...</p>

<p>具体设置位置是管理员后台的<code>CONFIGURATION</code> =&gt;  <code>CURRENCIES</code></p>

<p>这个货币设置可能新手不太明白...</p>

<p>我分二种情况说明</p>

<p><strong>1,只使用RMB一种货币</strong>  那直接填一个就OK了...不用费心，直接到下一步.</p>

<p><strong>2,使用二种以上的货币</strong> 那就要涉及<strong>WHMCS的货币换算了</strong>.</p>

<p>填表的几个英文解析如下</p>

<p><code>Currency Code</code> (货币代码,请按照国际标准填写RMB或者USD等货币代码)</p>

<p><code>Prefix</code>          (货币代号...按照国际惯例填$或者￥)</p>

<p><code>Suffix</code>          (货币名称...代号..比如"RMB""USD"...我建议与Currency Code保持一致)</p>

<p><code>Format</code>          (金额格式...默认就OK了)</p>

<p><code>Base Conv. Rate</code>    (这个要注意,是转换比率.使用二种以上货币时要设置.先假定一个基本货币.比如RMB..那设置RMB时候.这里填1..而设置USD的时候.这里就填6.85)</p>

<p><code>Update Pricing*</code>  (更新价格)</p>

<h1>
<a id="启用接口" class="anchor" href="#%E5%90%AF%E7%94%A8%E6%8E%A5%E5%8F%A3" aria-hidden="true"><span class="octicon octicon-link"></span></a>启用接口</h1>

<p>设置完货币后..就可以启用接口了.</p>

<p>具体设置位置是<code>CONFIGURATION</code> =&gt; <code>PAYMENT GATEWAYS</code></p>

<p>先在支付接口列表中找到alipay并按activite激活</p>

<p>几个设置详细说明:</p>

<p><code>Show on Order Form</code>     (在订单中显示使用本支付接口..前提是你要设置好相应的货币转换及金额.这个具体意义是"需要以RMB支付的时候,使用这个支付接口在订单里面)</p>

<p><code>Visible Name</code>        (客户看到的支付接口名称)</p>

<p><code>类型</code>                (支付宝签约的三种类型,分别是1/即时到帐  2/担保交易   3/双功能</p>

<p><code>卖家支付宝帐户</code>     (你用来收款的支付宝帐号)</p>

<p><code>合作伙伴ID</code>            (合作ID和安全码..都在支付宝签约商家后台中找到.....什么?你还未签约???找支付宝吧，个人签担保交易应该很简单)</p>

<p><code>安全检验码</code>           （同上)</p>

<p><code>Convert To For Processing</code>   (如果你设置使用了二种或者二种以上的货币单位,必须转换货币...这里一定要有RMB.并选择RMB..否则支付接口不可用)</p>

<h1>
<a id="测试" class="anchor" href="#%E6%B5%8B%E8%AF%95" aria-hidden="true"><span class="octicon octicon-link"></span></a>测试</h1>

<p>设置完成后，你可以让别人用自己的支付宝来测试一下本插件是否正常工作</p>

<p>测试成功后就可以正常使用啦!</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/frankwei98/WHMCS_Alipay">WHMCS 支付宝插件</a> 由 <a href="https://github.com/frankwei98">Frank Wei</a> 维护.</span>

        <span class="site-footer-credits">本页面在<a href="https://pages.github.com">GitHub Pages</a> 托管。主题: <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> 由 <a href="https://twitter.com/jasonlong">Jason Long</a> 制作.</span>
      </footer>

    </section>

  
  </body>
</html>
